div#issue(ng-controller='IssueCtrl')

  header
    div.caption
      div.title
        div.icon
          span.icon-speech
        span Issues


  // edit area will change height
  div.animate-height(uz-auto-height='section')

    section

      // ------------------------------------
      //              Account
      // ------------------------------------
      div.searchform.searchform-icon-before
        div.icon
          span.icon-users
        input.sfTypeahead.form-control.input-sm(type="text"
          options="inputOptions"
          datasets="accountData"
          ng-model="selectedAccount"
          ng-click="selectedAccount = null"
          placeholder='Redmine server...')
        i.fa.fa-search

      // ------------------------------------
      //              Project
      // ------------------------------------
      div.searchform.searchform-icon-before
        div.icon
          span.icon-folder-alt
        input.sfTypeahead.form-control.input-sm(type="text"
          options="inputOptions"
          datasets="projectData"
          ng-model="selectedProject"
          ng-click="selectedProject = null"
          placeholder='Project...')
        i.fa.fa-search

      // ------------------------------------
      //               Query
      // ------------------------------------
      div.searchform.searchform-icon-before
        div.icon
          span.icon-magnifier
        input.sfTypeahead.form-control.input-sm(type="text"
          options="inputOptions"
          datasets="queryData"
          ng-model="selectedQuery"
          ng-click="selectedQuery = null"
          placeholder='Query...')
        i.fa.fa-search


      // ------------------------------------
      //            Issue List
      // ------------------------------------
      div.searchform.searchform-icon-before
        input.form-control.input-sm(type="text"
          ng-model="searchField.text"
          ng-click="searchField.text = ''"
          placeholder='Issue...')
        i.fa.fa-search
      div.issueList
        ul
          li(ng-repeat='item in issues | filter:editState.listFilter | orderBy:"id"',
             ng-mousemove='editState.onMouseMove($event)')
            button.numberedLabel(type='button', ng-click="editState.onClickItem(item)", ga-click='issueItem')
              span.numberedLabel-number {{item.id}}
              span.numberedLabel-label(tooltip-html-unsafe="<h6>{{item.text}}</h6><p><span>priority: {{item.priority.name}}</span><br><span>assigned: {{item.assigned_to.name}}</span></p>",
                           tooltip-animation="",
                           tooltip-popup-delay='700',
                           tooltip-placement='{{tooltipPlace}}') {{item.text}}
              div.btn(ng-hide='editState.isContained(item)')
                span.icon-plus
              div.btn(ng-show='editState.isContained(item)')
                span.icon-minus
              button.btn.external-link(type='button', ng-click="editState.openLink(item.url + '/issues/' + item.id)", ga-click='issueLink')
                span.icon-question

      // page
      div.page
        uz-pagination.pagination-small(total-items='totalItems',
                                       page='editState.currentPage',
                                       items-per-page='itemsPerPage')
